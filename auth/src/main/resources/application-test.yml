# =========================
# TEST CONFIGURATION
# =========================
# Used ONLY for unit and slice tests
# No external services (DB, Docker, network)
# Safe for CI

spring:
  # -------------------------------------------------
  # Activate profile
  # -------------------------------------------------
  config:
    activate:
      on-profile: test

  # -------------------------------------------------
  # Application
  # -------------------------------------------------
  application:
    name: auth-test

  # -------------------------------------------------
  # Database (H2 in-memory)
  # -------------------------------------------------
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;MODE=PostgreSQL
    driver-class-name: org.h2.Driver
    username: sa
    password:

  # -------------------------------------------------
  # JPA / Hibernate
  # -------------------------------------------------
  jpa:
    hibernate:
      ddl-auto: create-drop   # create schema for each test run
    database-platform: org.hibernate.dialect.H2Dialect
    show-sql: false
    open-in-view: false

  # -------------------------------------------------
  # Flyway (DISABLED for unit tests)
  # -------------------------------------------------
  flyway:
    enabled: false

# =========================
# Security (TEST)
# =========================
security:
  jwt:
    # Base64-encoded test secret (valid length for HMAC)
    secret: dGVzdC1zZWNyZXQtdGVzdC1zZWNyZXQtdGVzdC1zZWNyZXQ=
    expiration-minutes: 60

# =========================
# Server (TEST)
# =========================
server:
  port: 0   # random port, avoids conflicts in CI

# =========================
# Logging (TEST)
# =========================
logging:
  level:
    root: WARN
    at.campus.auth: WARN
    org.springframework.security: WARN
